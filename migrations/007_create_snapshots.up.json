[
	{
		"create": "snapshots",
		"validator": {
			"$jsonSchema": {
				"bsonType": "object",
				"title": "snapshots",
				"required": [
					"_id",
					"war_id",
					"assignment_ids",
					"campaign_ids",
					"dispatch_ids",
					"planets"
				],
				"additionalProperties": false,
				"properties": {
					"_id": {
						"bsonType": "timestamp",
						"description": "The time the snapshot of the war was taken."
					},
					"war_id": {
						"bsonType": "int",
						"description": "FK ID of war"
					},
					"assignment_ids": {
						"bsonType": "array",
						"description": "Currently active assignments",
						"uniqueItems": true,
						"items": {
							"bsonType": "int"
						}
					},
					"campaign_ids": {
						"bsonType": "array",
						"description": "Currently active campaigns",
						"uniqueItems": true,
						"items": {
							"bsonType": "int"
						}
					},
					"dispatch_ids": {
						"bsonType": "array",
						"description": "Currently active dispatches",
						"uniqueItems": true,
						"items": {
							"bsonType": "int"
						}
					},
					"planets": {
						"bsonType": "array",
						"items": {
							"bsonType": "object",
							"description": "Contains information about planets currently part of this war",
							"required": [
								"planet_id",
								"health",
								"current_owner"
							],
							"additionalProperties": false,
							"properties": {
								"planet_id": {
									"bsonType": "int"
								},
								"health": {
									"bsonType": "int",
									"description": "The current health this planet has.",
									"minimum": 0
								},
								"current_owner": {
									"bsonType": "string",
									"description": "The faction that currently controls the planet."
								},
								"event": {
									"bsonType": "object",
									"description": "Information on the active event ongoing on this planet, if one is active.",
									"required": [
										"event_id",
										"health"
									],
									"additionalProperties": false,
									"properties": {
										"event_id": {
											"bsonType": "int",
											"description": "FK ID of event"
										},
										"health": {
											"bsonType": "int",
											"description": "The health of the Event at the time of snapshot.",
											"minimum": 0
										}
									}
								},
								"statistics": {
									"bsonType": "object",
									"required": [
										"missions_won",
										"missions_lost",
										"mission_time",
										"kills",
										"bullets_fired",
										"bullets_hit",
										"time_played",
										"deaths",
										"revives",
										"friendlies",
										"player_count"
									],
									"additionalProperties": false,
									"properties": {
										"missions_won": {
											"bsonType": "long",
											"description": "The amount of missions won.",
											"minimum": 0
										},
										"missions_lost": {
											"bsonType": "long",
											"description": "The amount of missions lost.",
											"minimum": 0
										},
										"mission_time": {
											"bsonType": "long",
											"description": "The total amount of time spent planetside (in seconds).",
											"minimum": 0
										},
										"kills": {
											"bsonType": "object",
											"title": "kills",
											"required": [
												"terminid",
												"automaton",
												"illuminate"
											],
											"additionalProperties": false,
											"properties": {
												"terminid": {
													"bsonType": "long",
													"description": "The total amount of bugs killed since start of the season.",
													"minimum": 0
												},
												"automaton": {
													"bsonType": "long",
													"description": "The total amount of automatons killed since start of the season.",
													"minimum": 0
												},
												"illuminate": {
													"bsonType": "long",
													"description": "The total amount of Illuminate killed since start of the season.",
													"minimum": 0
												}
											}
										},
										"bullets_fired": {
											"bsonType": "long",
											"description": "The total amount of bullets fired",
											"minimum": 0
										},
										"bullets_hit": {
											"bsonType": "long",
											"description": "The total amount of bullets hit",
											"minimum": 0
										},
										"time_played": {
											"bsonType": "long",
											"description": "The total amount of time played (including off-planet) in seconds.",
											"minimum": 0
										},
										"deaths": {
											"bsonType": "long",
											"description": "The amount of casualties on the side of humanity.",
											"minimum": 0
										},
										"revives": {
											"bsonType": "long",
											"description": "The amount of revives(?).",
											"minimum": 0
										},
										"friendlies": {
											"bsonType": "long",
											"description": "The amount of friendly fire casualties.",
											"minimum": 0
										},
										"player_count": {
											"bsonType": "long",
											"description": "The total amount of players present (at the time of the snapshot).",
											"minimum": 0
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"validationLevel": "strict",
		"validationAction": "error"
	}
]
